(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27755186"],{"10c1":function(t,e,s){"use strict";s("3f57")},1148:function(t,e,s){"use strict";var a=s("a691"),i=s("1d80");t.exports="".repeat||function(t){var e=String(i(this)),s="",n=a(t);if(n<0||n==1/0)throw RangeError("Wrong number of repetitions");for(;n>0;(n>>>=1)&&(e+=e))1&n&&(s+=e);return s}},"2cab":function(t,e,s){},"35bb":function(t,e,s){"use strict";s("dbd3")},"3e1c":function(t,e,s){"use strict";s("2cab")},"3f51":function(t,e,s){},"3f57":function(t,e,s){},"408a":function(t,e,s){var a=s("c6b6");t.exports=function(t){if("number"!=typeof t&&"Number"!=a(t))throw TypeError("Incorrect invocation");return+t}},"436d":function(t,e,s){},"4e4d":function(t,e,s){"use strict";s("436d")},"4ead":function(t,e,s){"use strict";s("b14e")},"617b":function(t,e,s){},"6ab7":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"Detail"}},[s("detail-nav",{ref:"detailNav",on:{NavPosition:t.NavPosition}}),s("scroll",{ref:"scroll",staticClass:"detail-scroll",on:{showBackTop:t.showBackTop}},[s("detail-swiper",{attrs:{DataList:t.topImages}}),s("detail-base-info",{attrs:{goodData:t.goods}}),s("detail-shop",{attrs:{businessData:t.business}}),s("detail-images",{attrs:{images:t.detailInfo},on:{imgLoad:t.imgLoad}}),s("detail-params",{ref:"params",attrs:{params:t.itemParams}}),s("detail-rate",{ref:"rate",attrs:{rate:t.rate}}),s("goods-list",{ref:"recommend",attrs:{list:t.recommendData}})],1),s("nav-bottom",{on:{addToCart:t.addToCart}}),s("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isBackTop,expression:"isBackTop"}],nativeOn:{click:function(e){return t.backClick(e)}}})],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav-bar",{staticClass:"detaul-nav",scopedSlots:t._u([{key:"left",fn:function(){return[a("div",{staticClass:"left",on:{click:t.back}},[a("img",{attrs:{src:s("7a74"),alt:""}})])]},proxy:!0},{key:"center",fn:function(){return[a("div",{staticClass:"center"},t._l(t.titles,(function(e,s){return a("div",{key:s,class:{active:s==t.currentIndex},on:{click:function(e){return t.titleClick(s)}}},[t._v(" "+t._s(e)+" ")])})),0)]},proxy:!0}])})},o=[],r=s("a7ac"),c={name:"DetailNavBar",components:{NavBar:r["a"]},data:function(){return{titles:["商品","参数","评论","推荐"],currentIndex:0}},methods:{back:function(){this.$router.back()},titleClick:function(t){this.currentIndex=t,this.$emit("NavPosition",t)}}},l=c,u=(s("704a"),s("2877")),d=Object(u["a"])(l,n,o,!1,null,"9560175c",null),f=d.exports,m=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"Detail-swiper"},[t.DataList.length>0?s("swiper",{ref:"DetailSwiper",attrs:{options:t.swiperOptions}},[t._l(t.DataList,(function(t,e){return s("swiper-slide",{key:e},[s("img",{attrs:{src:t,alt:""}})])})),s("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2):t._e()],1)},h=[],v=s("7212"),p=(s("dfa4"),{name:"DetailSwiper",props:{DataList:{type:Array,default:function(){return[]}}},data:function(){return{swiperOptions:{loop:!0,autoplay:{delay:2e3,stopOnLastSlide:!1,disableOnInteraction:!1},pagination:{el:".swiper-pagination",clickable:!0},observer:!0,observeParents:!0}}},components:{swiper:v["swiper"],swiperSlide:v["swiperSlide"]}}),g=p,_=(s("d320"),Object(u["a"])(g,m,h,!1,null,"ad4fe04e",null)),b=_.exports,C=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.goodData).length?s("div",{staticClass:"BaseInfo"},[s("div",{staticClass:"Infotitle"},[s("span",[t._v(t._s(t.goodData.title))])]),s("div",{staticClass:"InfoPrice"},[s("span",{staticClass:"newPrice"},[t._v(t._s(t.goodData.newPrice))]),s("span",{staticClass:"oldPrice"},[t._v(t._s(t.goodData.oldPrice))]),s("span",{staticClass:"discount"},[t._v(t._s(t.goodData.discount))])]),s("div",{staticClass:"InfoData"},[s("div",{staticClass:"InfoItem"},[t._v(t._s(t.goodData.columns[0]))]),s("div",{staticClass:"InfoItem"},[t._v(t._s(t.goodData.columns[1]))]),s("div",{staticClass:"InfoItem"},[t._v(t._s(t.goodData.services[t.goodData.services.length-1].name))])]),s("div",{staticClass:"express"},t._l(t.goodData.services.length-1,(function(e){return s("div",{key:e},[s("img",{attrs:{src:t.goodData.services[e-1].icon,alt:""}}),s("span",[t._v(t._s(t.goodData.services[e-1].name))])])})),0)]):t._e()},D=[],w={name:"DetailBaseInfo",props:{goodData:{type:Object,default:function(){return{}}}}},I=w,k=(s("9de9"),Object(u["a"])(I,C,D,!1,null,"0421f6e3",null)),y=k.exports,x=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"detail-shop"},[s("div",{staticClass:"logo"},[s("img",{attrs:{src:t.businessData.logo,alt:""}}),t._v(" "+t._s(t.businessData.name)+" ")]),s("div",{staticClass:"message"},[s("div",{staticClass:"message-left message-item"},[s("div",[s("div",[t._v(t._s(t.sell))]),s("p",[t._v("总销量")])]),s("div",[s("div",[t._v(t._s(t.businessData.goodsCount))]),s("p",[t._v("全部宝贝")])])]),s("div",{staticClass:"message-right message-item"},t._l(t.businessData.score,(function(e,a){return s("div",{key:a,staticClass:"message-mb"},[s("span",[t._v(t._s(e.name))]),s("span",{class:{good:e.isBetter}},[t._v(t._s(e.score))]),s("span",{staticClass:"score",class:{better:e.isBetter}},[t._v(t._s(e.isBetter?"高":"低"))])])})),0)]),t._m(0)])},T=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"shopLink"},[s("a",{attrs:{href:""}},[t._v("进店逛逛")])])}],$=(s("b680"),{name:"DetailShop",props:{businessData:{type:Object,default:function(){return{}}}},computed:{sell:function(){var t=this.businessData.sells/1e4;return t.toFixed(1)+"万"}}}),O=$,P=(s("3e1c"),Object(u["a"])(O,x,T,!1,null,"86eece22",null)),j=P.exports,L=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.images).length?s("div",{staticClass:"detail-images"},[s("div",{staticClass:"desc"},[s("div",[t._v(t._s(t.images.desc))]),s("div",{staticClass:"effect"},[t._v(t._s(t.images.detailImage[0].key))])]),t._l(t.images.detailImage[0].list,(function(e,a){return s("div",{key:a,staticClass:"images"},[s("img",{attrs:{src:e,alt:""},on:{load:t.imgLoad}})])}))],2):t._e()},B=[],N={name:"DetailImages",props:{images:{type:Object,default:function(){return{}}}},data:function(){return{counter:0,imagesLength:0}},methods:{imgLoad:function(){++this.counter==this.imagesLength&&this.$emit("imgLoad")}},watch:{images:function(){this.imagesLength=this.images.detailImage[0].list.length}}},E=N,S=(s("35bb"),Object(u["a"])(E,L,B,!1,null,"80a99c1e",null)),Y=S.exports,F=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.params).length?s("div",{staticClass:"detail-params"},[t._l(t.params.sizes,(function(e,a){return s("table",{key:a,staticClass:"top-table"},t._l(e,(function(e,a){return s("tr",{key:a},t._l(e,(function(e,a){return s("td",{key:a},[t._v(" "+t._s(e)+" ")])})),0)})),0)})),s("table",{staticClass:"bottom-table"},t._l(t.params.infos,(function(e,a){return s("tr",{key:a},[s("td",{staticClass:"meta"},[t._v(" "+t._s(e.key)+" ")]),s("td",{staticClass:"data"},[t._v(" "+t._s(e.value)+" ")])])})),0),0!==t.params.image.length?s("div",{staticClass:"params-img"},[s("img",{attrs:{src:t.params.image,alt:""}})]):t._e()],2):t._e()},R=[],M={name:"DetailParams",props:{params:{type:Object,default:function(){return{}}}}},z=M,G=(s("bac5"),Object(u["a"])(z,F,R,!1,null,"78e9e3ec",null)),J=G.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return 0!==Object.keys(t.rate).length?s("div",{staticClass:"detail-rate"},[t._m(0),s("div",{staticClass:"rate-user"},[s("div",{staticClass:"user-message"},[s("img",{attrs:{src:t.rate.list[0].user.avatar,alt:""}}),s("span",[t._v(t._s(t.rate.list[0].user.uname))])]),s("div",{staticClass:"user-content"},[s("span",[t._v(t._s(t.rate.list[0].content))])]),s("div",{staticClass:"user-date"},[s("span",{staticClass:"date"},[t._v(t._s(t._f("showDate")(t.rate.list[0].created)))]),s("span",[t._v(t._s(t.rate.list[0].style))])]),t.rate.list[0].images?s("div",{staticClass:"user-images"},t._l(t.rate.list[0].images,(function(t,e){return s("img",{key:e,attrs:{src:t}})})),0):t._e()])]):t._e()},W=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"rate"},[s("span",[t._v("用户评价")]),s("span",[t._v("更多")])])}],q=s("90b9"),H={name:"DetailRate",props:{rate:{type:Object,default:function(){return{}}}},filters:{showDate:function(t){var e=new Date(1e3*t);return Object(q["b"])(e,"yyyy-MM-dd")}}},K=H,Q=(s("4ead"),Object(u["a"])(K,A,W,!1,null,"059b9e8a",null)),U=Q.exports,V=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-nav"},[t._m(0),s("div",{staticClass:"bottom-right"},[s("div",{staticClass:"shop-car",on:{click:t.addCart}},[t._v("加入购物车")]),s("div",{staticClass:"shop-shop"},[t._v("购买")])])])},X=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"bottom-left"},[s("div",{staticClass:"service"},[t._v("客服")]),s("div",{staticClass:"shop"},[t._v("店铺")]),s("div",{staticClass:"collection"},[t._v("收藏")])])}],Z={name:"DetailBottomBar",methods:{addCart:function(){this.$emit("addToCart")}}},tt=Z,et=(s("4e4d"),Object(u["a"])(tt,V,X,!1,null,"35075cd3",null)),st=et.exports,at=s("6d71"),it=s("5d17");s("b0c0");function nt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var ot=s("1bab");function rt(t){return Object(ot["a"])({url:"/detail",params:{iid:t}})}function ct(){return Object(ot["a"])({url:"/recommend"})}var lt=function t(e,s,a){nt(this,t),this.title=e.title,this.desc=e.desc,this.newPrice=e.price,this.oldPrice=e.oldPrice,this.discount=e.discountDesc,this.columns=s,this.services=a,this.nowPrice=e.highNowPrice},ut=function t(e){nt(this,t),this.logo=e.shopLogo,this.name=e.name,this.fans=e.cFans,this.sells=e.cSells,this.score=e.score,this.goodsCount=e.cGoods},dt=function t(e,s){nt(this,t),this.image=e.images?e.images[0]:"",this.infos=e.set,this.sizes=s.tables},ft=s("eecb"),mt=s("4ba1"),ht={name:"Detail",data:function(){return{iid:null,topImages:[],goods:{},business:{},detailInfo:{},refresh:null,itemParams:{},rate:{},recommendData:[],themeTopY:[0,0,0,0],navIndex:0}},components:{DetailNav:f,DetailSwiper:b,DetailBaseInfo:y,DetailShop:j,DetailImages:Y,DetailParams:J,DetailRate:U,GoodsList:at["a"],NavBottom:st,Scroll:it["a"]},mixins:[ft["b"],ft["a"]],created:function(){this.iid=this.$route.params.iid,this.getDetailDate(this.iid),this.getDetailRecommend()},destroyed:function(){this.$bus.$off("itemImageLoad",this.ItemImgListen)},watch:{themeTopY:function(){this.NavPosition(this.navIndex)}},methods:{imgLoad:function(){this.$refs.scroll.scrollRefresh(),this.themeTopY=[],this.themeTopY.unshift(-this.$refs.recommend.$el.offsetTop),this.themeTopY.unshift(-this.$refs.rate.$el.offsetTop||this.themeTopY[0]),this.themeTopY.unshift(-this.$refs.params.$el.offsetTop),this.themeTopY.unshift(0)},NavPosition:function(t){this.navIndex=t,this.$refs.scroll.scrollTo(0,this.themeTopY[t],500)},showBackTop:function(t){this.isBackTop=-t>3e3;var e=this.themeTopY.length;for(var s in this.themeTopY)(s<e-1&&t<=this.themeTopY[1*s]&&t>this.themeTopY[1*s+1]||t<=this.themeTopY[e-1])&&(this.$refs.detailNav.currentIndex=1*s)},getDetailDate:function(t){var e=this;rt(t).then((function(t){var s=t.result;e.topImages=s.itemInfo.topImages,e.goods=new lt(s.itemInfo,s.columns,s.shopInfo.services),e.business=new ut(s.shopInfo),e.detailInfo=s.detailInfo,e.itemParams=new dt(s.itemParams.info,s.itemParams.rule),0!==s.rate.cRate&&(e.rate=s.rate)}))},getDetailRecommend:function(){var t=this;ct().then((function(e){t.recommendData=e.data.list}))},addToCart:function(){var t=this,e={};e.image=this.topImages[0],e.title=this.goods.title,e.desc=this.goods.desc,e.price=this.goods.nowPrice,e.iid=this.iid,this.$store.dispatch(mt["c"],e).then((function(e){t.$toast.show(e,2e3)}))}}},vt=ht,pt=(s("10c1"),Object(u["a"])(vt,a,i,!1,null,"1de73e2e",null));e["default"]=pt.exports},"704a":function(t,e,s){"use strict";s("3f51")},"7a74":function(t,e,s){t.exports=s.p+"img/back.d5a990cc.svg"},"9af5":function(t,e,s){},"9cbd":function(t,e,s){},"9de9":function(t,e,s){"use strict";s("617b")},b14e:function(t,e,s){},b680:function(t,e,s){"use strict";var a=s("23e7"),i=s("a691"),n=s("408a"),o=s("1148"),r=s("d039"),c=1..toFixed,l=Math.floor,u=function(t,e,s){return 0===e?s:e%2===1?u(t,e-1,s*t):u(t*t,e/2,s)},d=function(t){var e=0,s=t;while(s>=4096)e+=12,s/=4096;while(s>=2)e+=1,s/=2;return e},f=c&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!r((function(){c.call({})}));a({target:"Number",proto:!0,forced:f},{toFixed:function(t){var e,s,a,r,c=n(this),f=i(t),m=[0,0,0,0,0,0],h="",v="0",p=function(t,e){var s=-1,a=e;while(++s<6)a+=t*m[s],m[s]=a%1e7,a=l(a/1e7)},g=function(t){var e=6,s=0;while(--e>=0)s+=m[e],m[e]=l(s/t),s=s%t*1e7},_=function(){var t=6,e="";while(--t>=0)if(""!==e||0===t||0!==m[t]){var s=String(m[t]);e=""===e?s:e+o.call("0",7-s.length)+s}return e};if(f<0||f>20)throw RangeError("Incorrect fraction digits");if(c!=c)return"NaN";if(c<=-1e21||c>=1e21)return String(c);if(c<0&&(h="-",c=-c),c>1e-21)if(e=d(c*u(2,69,1))-69,s=e<0?c*u(2,-e,1):c/u(2,e,1),s*=4503599627370496,e=52-e,e>0){p(0,s),a=f;while(a>=7)p(1e7,0),a-=7;p(u(10,a,1),0),a=e-1;while(a>=23)g(1<<23),a-=23;g(1<<a),p(1,1),g(2),v=_()}else p(0,s),p(1<<-e,0),v=_()+o.call("0",f);return f>0?(r=v.length,v=h+(r<=f?"0."+o.call("0",f-r)+v:v.slice(0,r-f)+"."+v.slice(r-f))):v=h+v,v}})},bac5:function(t,e,s){"use strict";s("9af5")},d320:function(t,e,s){"use strict";s("9cbd")},dbd3:function(t,e,s){}}]);
//# sourceMappingURL=chunk-27755186.5abb8a5b.js.map